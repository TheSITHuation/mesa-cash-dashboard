/* styles.css - V5 - Final con Flexbox Inteligente y Mejoras de UI */
:root {
    --seat-size: 80px; 
    --seat-size-occupied: 100px; 
    --dealer-size: 85px;
    --table-width: 800px; 
    --table-height: 400px;
    --table-border-radius: 200px; 
    --felt-logo-width: 70%; 
    --felt-logo-opacity: 0.2; 
    --on-table-data-font-size: 1.3em;
    --on-table-data-icon-size: 1.3em;
    --on-table-data-gap: 7px; 
    --on-table-data-bg: rgba(0, 0, 0, 0.25); 
    --on-table-text-color: #FFFFFF; 
    --on-table-icon-color: #FFD700; 
    --side-panel-width: 350px; 
    --gold-color: #FFD700;
    --light-text-color: #EAEAEA;
    --dark-text-color: #1B1B1B;
    --bg-gradient-start: #1B1B1B;
    --bg-gradient-end: #333333;
    --button-icon-size: 1em; 
}

/* ================== RESET Y ESTILOS GLOBALES ================== */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
    color: var(--light-text-color);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    overflow-x: hidden;
}

header {
    background-color: var(--gold-color);
    color: var(--dark-text-color);
    padding: 15px 20px; 
    font-size: 1.9em;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    font-weight: bold;
    position: relative;
    z-index: 200;
    overflow: hidden;
}

header::before {
    content: "";
    background-image: url('https://i.postimg.cc/5yFygKwG/logomjr.png');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    opacity: 0.15;
    z-index: -1;
}

/* ================== MAQUETACIÓN PRINCIPAL (FLEXBOX INTELIGENTE) ================== */

.mainContainer {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    padding: 20px;
    width: 100%;
    flex-grow: 1;
}

.table-section {
    position: relative;
    display: flex;
    align-items: flex-start;
    transition: transform 0.4s ease, opacity 0.4s ease;
    min-width: 0; 
    flex-grow: 1; /* Permite que el elemento crezca */
    flex-shrink: 1; /* Permite que el elemento se encoja */
}

/* --- Vista de una sola mesa --- */
.table-section.single-table-mode {
    flex-basis: 100%; /* Ocupa toda la base disponible */
    max-width: 1800px;
}

/* --- Vista de Múltiples Mesas --- */
.table-section:not(.single-table-mode) {
    flex-basis: 850px; /* Ancho ideal que intentará mantener */
    max-width: calc(50% - 10px); /* Como máximo, la mitad de la pantalla menos el gap */
}

.side-panel {
    width: var(--side-panel-width);
    background-color: #282828;
    border: 1px solid var(--gold-color);
    border-left: none;
    border-radius: 0 10px 10px 0;
    box-shadow: 5px 0 15px rgba(0, 0, 0, 0.5);
    padding: 20px;
    flex-shrink: 0;
    transition: width 0.35s ease-in-out, padding 0.35s ease-in-out, transform 0.35s ease-in-out;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 15px;
    z-index: 100;
}

.diagram-container {
    flex-grow: 1;
    min-width: 0;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.table-section.side-panel-collapsed .side-panel {
    width: 0;
    padding-left: 0;
    padding-right: 0;
    border: none;
    transform: translateX(-10px); 
}

.side-panel-toggle-button {
    position: absolute;
    top: 15px;
    left: 15px;
    z-index: 101;
    background: var(--gold-color);
    color: var(--dark-text-color);
    border: none;
    border-radius: 6px;
    width: 34px;
    height: 34px;
    cursor: pointer;
    font-size: var(--button-icon-size);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: left 0.35s ease-in-out, transform 0.2s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,.4);
}
.side-panel-toggle-button:hover {
    transform: scale(1.1);
}
.table-section:not(.side-panel-collapsed) .side-panel-toggle-button {
    left: calc(var(--side-panel-width) - 45px);
}


/* ================== ESTILOS DE COMPONENTES ================== */

.delete-table {
    position: absolute; top: 15px; right: 15px; z-index: 50;
    background: #7c1a1a; color: white; border: 1px solid #a01c1c;
    border-radius: 6px; width: 34px; height: 34px;
    cursor: pointer; transition: all 0.2s ease;
}
.delete-table:hover { background-color: #A01C1C; transform: scale(1.1); }

/* --- Tarjeta de Jugador - MEJORA DE SENSIBILIDAD --- */
.player-info-card {
    position: fixed; top: 100px; right: 20px; width: 380px;
    background-color: #282828; border: 1px solid var(--gold-color);
    border-radius: 10px; box-shadow: 0 15px 25px rgba(0, 0, 0, 0.6);
    padding: 20px; z-index: 1001; color: var(--light-text-color);
    font-size: 1.1em; transition: opacity 0.3s ease, transform 0.3s ease;
    opacity: 0; transform: translateX(100%);
    pointer-events: none; /* LA MEJORA: La tarjeta ignora el ratón */
}
.player-info-card.visible {
    opacity: 1;
    transform: translateX(0);
}
.player-info-card-header { display: flex; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #444; }
.player-info-card-avatar { width: 120px; height: 120px; border-radius: 50%; overflow: hidden; margin-right: 15px; background-color: #333; display: flex; align-items: center; justify-content: center; border: 2px solid var(--gold-color); font-size: 6em; flex-shrink: 0; }
.player-info-card-avatar img { width: 100%; height: 100%; object-fit: cover; }
.player-info-card-name { font-size: 1.4em; font-weight: bold; color: var(--gold-color); margin: 0; }
.player-info-card-body p { margin-bottom: 8px; line-height: 1.5; display: flex; justify-content: space-between; align-items: center; }
.player-info-card-body strong { color: #aaa; margin-right: 8px; }
.player-info-card-body span { font-weight: 600; color: var(--light-text-color); text-align: right; }
hr.info-card-divider { border: none; border-top: 1px dashed #555; margin: 12px 0; }

/* --- Panel Lateral --- */
.side-panel h3 { color: var(--gold-color); text-align: center; font-size: 1.4em; margin-bottom: 10px; border-bottom: 2px solid var(--gold-color); padding-bottom: 15px; }
.side-panel-main-controls .data-item { display: flex; align-items: center; padding: 8px 0; font-size: 1.1em; }
.side-panel-main-controls .data-item label { margin-right: auto; color: #ccc; }
.side-panel-main-controls .data-icon { color: var(--gold-color); margin-right: 15px; width: 25px; text-align: center; font-size: 1.1em; }
.side-panel-main-controls .value-mesa-display { font-weight: bold; padding: 3px 8px; border-radius: 5px; background-color: rgba(255,255,255,0.08); cursor: text; min-width: 60px; text-align: center; border: 1px solid var(--gold-color); }
.side-panel .status-control { display: flex; align-items: center; gap: 10px; }
.side-panel .status-select { background-color: #3E3E3E; color: var(--light-text-color); border: 1px solid var(--gold-color); border-radius: 4px; padding: 5px 8px; font-family: inherit; font-size: 0.9em; }
.side-panel .status-icon { font-size: 1.2em; }
hr.side-panel-divider { border: none; border-top: 1px dashed #555; margin: 10px 0; }
.waitlist-section { display: flex; flex-direction: column; min-height: 100px; flex-grow: 1; }
.waitlist-table-container { flex-grow: 1; overflow-y: auto; }
.waitlist-table-container::-webkit-scrollbar { width: 5px; }
.waitlist-table-container::-webkit-scrollbar-track { background: #444; }
.waitlist-table-container::-webkit-scrollbar-thumb { background-color: var(--gold-color); border-radius: 4px; }
.waitlist-table { width: 100%; border-collapse: collapse; }
.waitlist-table td { border: 1px solid #4A4A4A; padding: 6px 8px; background-color: #2A2A2A; color: var(--light-text-color); font-size: 1em; }
.waitlist-table td:last-child { text-align: right; background-color: transparent; border: none; }
.waitlist-action-button { border: 1px solid var(--gold-color); background-color: #484848; color: var(--gold-color); margin-left: 5px; width: 28px; height: 28px; padding: 0; font-size: 0.8em; display: inline-flex; align-items: center; justify-content: center; border-radius: 5px; cursor: pointer; transition: background-color 0.2s, transform 0.1s; }
.waitlist-action-button:hover { background-color: #5A5A5A; transform: scale(1.1); }
.side-panel-actions { display: flex; flex-direction: column; gap: 8px; margin-top: auto; padding-top: 10px; }
.side-panel-actions button, .add-waitlist-row {
    width: 100%; padding: 8px; border: none; border-radius: 5px; cursor: pointer;
    font-weight: bold; transition: background-color 0.3s, transform 0.1s;
    font-size: 0.9em; display: flex; align-items: center; justify-content: center; gap: 10px;
}
.side-panel-actions button:active, .add-waitlist-row:active { transform: scale(0.98); }
.add-waitlist-row { background-color: var(--gold-color); color: var(--dark-text-color); }
.add-waitlist-row:hover { background-color: #e6c200; }
.side-panel-actions .export-csv-button { background-color: #388E3C; color: white; }
.side-panel-actions .export-csv-button:hover { background-color: #2E7D32; }
.side-panel-actions .test-banner-button { background-color: var(--gold-color); color: var(--dark-text-color); }
.side-panel-actions .test-banner-button:hover { background-color: #e6c200; }

/* --- Mesa de Poker y sus componentes --- */
.game-type-banner-main {
    background: var(--gold-color); color: var(--dark-text-color); padding: 8px 25px; font-weight: bold;
    text-transform: uppercase; border-radius: 6px; font-size: 1.5em; margin-bottom: 20px;
    display: inline-flex; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.2); cursor: default;
}
.game-type-banner-main i { margin-right: 15px; }
.game-type-banner-main span[contenteditable="true"] { padding: 2px 6px; border-radius: 3px; cursor: text; border: 1px solid transparent; }
.game-type-banner-main span[contenteditable="true"]:hover,
.game-type-banner-main span[contenteditable="true"]:focus { background-color: rgba(0,0,0,0.15); outline: none; border: 1px solid #a08c00; }

.table {
    position: relative; width: var(--table-width); height: var(--table-height); background-color: #0f5132; 
    border: 4px solid var(--gold-color); border-radius: var(--table-border-radius); animation: ledPulse 2.5s infinite alternate;
    box-shadow: 0 8px 20px rgba(0,0,0,0.6), inset 0 0 15px rgba(0,0,0,0.3); margin: 10px auto;
    display: flex; align-items: center; justify-content: center;
}
.table .table-felt-logo {
    position: absolute; top: 50%; left: 50%; width: var(--felt-logo-width); height: auto; max-height: 70%;
    transform: translate(-50%, -50%); object-fit: contain; opacity: var(--felt-logo-opacity);
    pointer-events: none; z-index: 0;
}
.on-table-data-display {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    display: flex; flex-direction: column; align-items: center; gap: var(--on-table-data-gap);
    padding: 20px 40px; background-color: var(--on-table-data-bg); border-radius: 10px;
    z-index: 1; color: var(--on-table-text-color); text-align: center; pointer-events: none;
    box-shadow: 0 0 5px rgba(0,0,0,0.4);
}
.on-table-data-display .on-table-item { display: flex; align-items: center; font-size: var(--on-table-data-font-size); font-weight: 600; text-shadow: 1px 1px 2px #000; white-space: nowrap; }
.on-table-data-display .on-table-item i { margin-right: 12px; color: var(--on-table-icon-color); font-size: var(--on-table-data-icon-size); line-height: 1; }
.on-table-data-display span[contenteditable="true"] { padding: 3px 6px; border-radius: 4px; background-color: rgba(255,255,255,0.1); cursor: text; pointer-events: auto; min-width: 160px; display: inline-block; border: 1px solid transparent; }
.on-table-data-display span[contenteditable="true"]:hover { background-color: rgba(255,255,255,0.18); }
.on-table-data-display span[contenteditable="true"]:focus { background-color: rgba(255,255,255,0.22); outline: none; border: 1px solid var(--gold-color); box-shadow: 0 0 4px var(--gold-color); }

.seat { position: absolute; width: var(--seat-size); height: var(--seat-size); background-color: #444; border: 1px solid var(--gold-color); border-radius: 50%; cursor: pointer; transition: all .2s ease; display: flex; justify-content: center; align-items: center; z-index: 2; }
.seat .seat-content { font-size: 1.5em; font-weight: bold; color: var(--gold-color); width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; overflow: hidden; border-radius: 50%; }
.seat.occupied { width: var(--seat-size-occupied); height: var(--seat-size-occupied); background-color: transparent; border: none; }
.seat.occupied .seat-content { font-size: 4em; color: var(--light-text-color); }
.seat.occupied .seat-content img.player-avatar { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 2px solid var(--gold-color); }
.seat:not(.occupied):hover { transform: scale(1.1); background-color: var(--gold-color); }
.seat:not(.occupied):hover .seat-content { color: var(--dark-text-color); }
.seat[data-seat="10"] { top: 10%; left: 50%; transform: translate(-50%,-50%); width: var(--dealer-size); height: var(--dealer-size); background-color: transparent; border: none; }
.seat[data-seat="10"] img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--gold-color); object-fit: cover; }
.seat[data-seat="10"]:hover { transform: translate(-50%,-50%) scale(1.1); }
.seat[data-seat="9"] { top: 15%; left: 25%; transform: translate(-50%,-50%); }
.seat[data-seat="1"] { top: 15%; left: 75%; transform: translate(-50%,-50%); }
.seat[data-seat="8"] { top: 30%; left: 8%; transform: translate(-50%,-50%); }
.seat[data-seat="2"] { top: 30%; left: 92%; transform: translate(-50%,-50%); }
.seat[data-seat="7"] { top: 67%; left: 8%; transform: translate(-50%,-50%); }
.seat[data-seat="3"] { top: 67%; left: 92%; transform: translate(-50%,-50%); }
.seat[data-seat="6"] { top: 85%; left: 25%; transform: translate(-50%,-50%); }
.seat[data-seat="5"] { top: 86%; left: 50%; transform: translate(-50%,-50%); }
.seat[data-seat="4"] { top: 85%; left: 75%; transform: translate(-50%,-50%); }

@keyframes ledPulse { 0%,100% { box-shadow: 0 0 6px var(--gold-color), 0 0 10px var(--gold-color), 0 0 1px var(--gold-color); } 50% { box-shadow: 0 0 35px var(--gold-color), 0 0 28px var(--gold-color), 0 0 3px var(--gold-color); } }
.table-section.seating-mode .seat:not(.occupied) { background-color: #00dd00; animation: blink .8s infinite alternate; }
@keyframes blink { from { opacity: 1 } to { opacity: 0.6 } }

.rake-banner { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); z-index: 50; background-color: rgba(192,57,43,.92); color: white; padding: 10px 25px; font-size: 2.5em; font-weight: bold; border-radius: 10px; box-shadow: 0 0 12px rgba(0,0,0,.3); text-align: center; }

.marquee-banner-container { width: 100%; background-color: #101010; color: var(--gold-color); padding: 15px 0; margin-top: 20px; overflow: hidden; white-space: nowrap; box-sizing: border-box; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,.25); cursor: pointer; }
.marquee-banner-text { display: inline-block; padding-left: 100%; animation: marquee-scroll-left 28s linear infinite; font-size: 1.5em; font-weight: bold; }
@keyframes marquee-scroll-left { 0% { transform: translateX(0) } 100% { transform: translateX(-100%) } }
.marquee-banner-container:hover .marquee-banner-text { animation-play-state: paused; }

#addTableButton { display: flex; align-items: center; justify-content: center; gap: 15px; width: 95%; max-width: 800px; margin: 25px auto; padding: 12px 20px; font-size: 1.1em; font-weight: bold; background-color: var(--gold-color); color: var(--dark-text-color); border: none; border-radius: 8px; cursor: pointer; transition: background-color .3s,transform .1s; box-shadow: 0 4px 8px rgba(0,0,0,.4); }
#addTableButton:hover { background-color: #e6c200; }
#addTableButton:active { transform: scale(.98); }
#addTableButton i { font-size: 1.3em; }

/* ================== ESTILOS MULTI-MESA Y RESPONSIVOS ================== */

/* Define el tamaño reducido cuando hay múltiples mesas */
.table-section:not(.single-table-mode) {
    --seat-size: 65px; 
    --seat-size-occupied: 80px; 
    --dealer-size: 70px;
    --table-width: 100%;
    --table-height: 350px;
    --table-border-radius: 175px; 
    --on-table-data-font-size: 1em;
    --on-table-data-icon-size: 1em;
}
.table-section:not(.single-table-mode) .game-type-banner-main {
    font-size: 1.2em;
    padding: 6px 18px;
    margin-bottom: 15px;
}
.table-section:not(.single-table-mode) .marquee-banner-container {
    margin-top: 15px;
}
.table-section:not(.single-table-mode) .marquee-banner-text {
    font-size: 1.2em;
}

@media (max-width: 767px) {
    body { font-size: 14px; }
    .mainContainer {
        display: grid;
        grid-template-columns: 1fr;
        
    }
}
    .table-section {
        flex-direction: column;
    }
    .side-panel {
        width: 100%;
        max-width: 100%;
        border-radius: 10px;
        border-left: 1px solid var(--gold-color);
        transition: max-height 0.35s ease-in-out, padding 0.35s ease-in-out;
        max-height: 80vh;
        overflow-y: auto;
    }
    .side-panel-toggle-button,
    .table-section:not(.side-panel-collapsed) .side-panel-toggle-button {
        position: relative;
        left: auto;
        margin: 0 auto 10px;
        border-radius: 6px;
        transform: none !important;
    }
    .diagram-container {
        padding: 10px 0;
        min-width: 100%;
    }
    .table {
        width: 95vw;
        height: calc(95vw / 1.9);
        border-radius: calc((95vw / 1.9) / 2);
        border-width: 2px;
        animation: none;
    }
    .seat { width: calc(var(--seat-size)*0.7); height: calc(var(--seat-size)*0.7); }
    .seat.occupied { width: calc(var(--seat-size-occupied)*0.6); height: calc(var(--seat-size-occupied)*0.6); }
    .seat[data-seat="10"] { width: calc(var(--dealer-size)*0.65); height: calc(var(--dealer-size)*0.65); }

